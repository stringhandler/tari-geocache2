<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tari Geocache</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 600px;
            width: 100%;
            padding: 40px;
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
            font-size: 14px;
        }

        input,
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
            font-family: inherit;
            transition: border-color 0.3s;
        }

        input:focus,
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        button {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .message {
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 20px;
            display: none;
        }

        .message.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .message.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .required {
            color: #e53e3e;
        }

        .hint {
            font-size: 12px;
            color: #666;
            margin-top: 4px;
        }

        .guestbook-entry {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
        }

        .guestbook-entry-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .guestbook-from {
            font-weight: 600;
            color: #667eea;
            word-break: break-all;
        }

        .guestbook-date {
            color: #666;
            font-size: 12px;
        }

        .guestbook-memo {
            color: #333;
            margin-bottom: 8px;
            line-height: 1.5;
        }

        .guestbook-hash {
            font-size: 11px;
            color: #888;
            font-family: monospace;
            word-break: break-all;
        }

        .pagination-btn {
            padding: 8px 16px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .pagination-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .pagination-info {
            display: flex;
            align-items: center;
            color: #666;
            font-size: 14px;
        }
    </style>
    <script>
        // Environment configuration
        window.ENV = {
            BASE_URL: '' // Can be set to API base URL, e.g., 'http://localhost:3000' or 'https://api.example.com'
        };
    </script>
</head>

<body>
    <div class="container" id="createContainer">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <div>
                <h1>Create Geocache</h1>
                <p class="subtitle">Create a new wallet (Don't use your main Tari wallet) and then export the view key and spend
                    key. Users can post messages by sending funds to the address. Remember to keep the address in the geocache
                </p>
            </div>
            <a href="/list.html" style="padding: 12px 24px; background: linear-gradient(135deg, #059669 0%, #10b981 100%); color: white; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer; text-decoration: none; white-space: nowrap;">
                üìã View All Geocaches
            </a>
        </div>

        <div id="message" class="message"></div>

        <form id="geocacheForm">
            <div class="form-group">
                <label for="name">Name <span class="required">*</span></label>
                <input type="text" id="name" name="name" required placeholder="e.g., Hidden Treasure Peak">
            </div>

            <div class="form-group">
                <label for="description">Description</label>
                <textarea id="description" name="description"
                    placeholder="Describe the geocache location..."></textarea>
            </div>

            <div class="row">
                <div class="form-group">
                    <label for="latitude">Latitude</label>
                    <input type="number" id="latitude" name="latitude" step="any" placeholder="e.g., 37.7749">
                </div>

                <div class="form-group">
                    <label for="longitude">Longitude</label>
                    <input type="number" id="longitude" name="longitude" step="any" placeholder="e.g., -122.4194">
                </div>
            </div>

            <div class="form-group">
                <label for="view_key">View Key <span class="required">*</span></label>
                <input type="text" id="view_key" name="view_key" required placeholder="Enter Tari view key">
                <p class="hint">The private view key from your Tari wallet</p>
            </div>

            <div class="form-group">
                <label for="spend_pub_key">Spend Public Key <span class="required">*</span></label>
                <input type="text" id="spend_pub_key" name="spend_pub_key" required
                    placeholder="Enter Tari spend public key">
                <p class="hint">The public spend key from your Tari wallet</p>
            </div>

            <button type="submit">Create Geocache</button>
        </form>
    </div>

    <div class="container" id="guestbookContainer" style="display: none;">
        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 20px; gap: 15px;">
            <div>
                <h1 id="guestbookTitle">Guestbook</h1>
                <p class="subtitle" id="guestbookSubtitle"></p>
            </div>
            <div style="display: flex; gap: 10px;">
                <a href="/" style="padding: 10px 20px; background: linear-gradient(135deg, #94a3b8 0%, #64748b 100%); color: white; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer; text-decoration: none; white-space: nowrap;">
                    ‚Üê Back
                </a>
                <a href="/list.html" style="padding: 10px 20px; background: linear-gradient(135deg, #059669 0%, #10b981 100%); color: white; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer; text-decoration: none; white-space: nowrap;">
                    üìã All Geocaches
                </a>
            </div>
        </div>

        <div style="margin-bottom: 20px;">
            <button onclick="goToAdmin()" style="width: 100%; padding: 14px; background: linear-gradient(135deg, #ea580c 0%, #f97316 100%); color: white; border: none; border-radius: 6px; font-size: 16px; font-weight: 600; cursor: pointer;">
                üîê Admin
            </button>
        </div>
        <div>
            <p>Want to post something here? Find the geocache in real life to see the address and send some Tari to it
                (even 0.0000001 XTM will work)</p>

        </div>
        <a href="/" style="display: inline-block; margin-bottom: 20px; color: #667eea;">Create your own Geocache</a>


        <div id="scanResult"
            style="display: none; background: #f0f9ff; border: 2px solid #3b82f6; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
            <h3 style="margin-top: 0; color: #1e40af;">Scan Result</h3>
            <pre id="scanData"
                style="background: white; padding: 10px; border-radius: 4px; overflow-x: auto; font-size: 12px;"></pre>
        </div>

        <div id="guestbookEntries"></div>

        <div id="pagination" style="display: flex; justify-content: center; gap: 10px; margin-top: 20px;"></div>
    </div>

    <script src="app.js"></script>
</body>

</html>